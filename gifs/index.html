<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>GIFs — Michael Mace</title>
    <link rel="stylesheet" href="../style.css" />
    <link rel="icon" href="/favicon.png" />
    <meta name="color-scheme" content="light dark" />

    <style>
      .gif-rows {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
        margin-top: 0.75rem;
      }
      .gif-row-label {
        margin: 0 0 0.5rem 0;
        font-size: 0.9rem;
        font-weight: 600;
      }

      .gif-grid {
        display: flex;
        flex-direction: row;
        gap: 1rem;
        margin-top: 0;
        overflow-x: auto;
        overflow-y: hidden;
        scroll-snap-type: x mandatory;
        scroll-behavior: smooth;
        padding: 0.5rem 0;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: thin;
      }
      .gif-grid::-webkit-scrollbar {
        height: 8px;
      }
      .gif-grid::-webkit-scrollbar-thumb {
        background: rgba(128, 128, 128, 0.4);
        border-radius: 4px;
      }

      .gif-card {
        position: relative;
        flex: 0 0 auto;
        width: min(520px, 92vw);
        min-width: min(520px, 92vw);
        scroll-snap-align: start;
        border-radius: 10px;
        overflow: hidden;
      }

      .gif {
        width: 100%;
        aspect-ratio: 16 / 9;
        object-fit: cover;
        display: block;
        border-radius: 10px;
        cursor: pointer;
        transition: opacity 0.15s ease;
      }

      .gif-card:hover .gif {
        opacity: 0.92;
      }

      .card-labels {
        position: absolute;
        bottom: 0.5rem;
        left: 0.5rem;
        right: 0.5rem;
        display: flex;
        flex-wrap: wrap;
        gap: 0.35rem;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.15s ease;
        z-index: 1;
      }
      .gif-card:hover .card-labels {
        opacity: 1;
      }
      .card-labels .card-label {
        font-size: 0.7rem;
        color: #fff;
        background: rgba(0, 0, 0, 0.5);
        padding: 0.25rem 0.5rem;
        border-radius: 6px;
        pointer-events: none;
      }
      .card-labels .card-label[href] {
        text-decoration: none;
        pointer-events: auto;
      }
      .card-labels .card-label-title:empty {
        display: none;
      }

      .heart-btn {
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
        z-index: 2;
        width: 2rem;
        height: 2rem;
        padding: 0;
        border: none;
        border-radius: 50%;
        background: rgba(0, 0, 0, 0.4);
        color: #fff;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background 0.15s ease, color 0.15s ease;
      }
      .heart-btn:hover {
        background: rgba(0, 0, 0, 0.6);
      }
      .heart-btn.is-fav {
        color: #e74c3c;
      }
      .heart-btn svg {
        width: 1.1rem;
        height: 1.1rem;
        fill: none;
        stroke: currentColor;
        stroke-width: 2;
      }
      .heart-btn.is-fav svg {
        fill: currentColor;
      }
      .heart-btn[aria-disabled='true'] {
        cursor: default;
        pointer-events: none;
      }

      .toast {
        position: fixed;
        left: 50%;
        top: 24px;
        transform: translateX(-50%);
        padding: 0.5rem 0.75rem;
        border-radius: 10px;
        background: rgba(0, 0, 0, 0.75);
        color: #fff;
        font-size: 0.9rem;
        opacity: 0;
        pointer-events: none;
        transition: opacity 150ms ease;
      }
      .toast.show {
        opacity: 1;
      }

      @media (prefers-color-scheme: light) {
        .toast {
          background: rgba(0, 0, 0, 0.85);
        }
      }
    </style>
  </head>

  <body>
    <p class="nav-links">
      <a href="../index.html">Home</a> ·
      <a href="../notes/index.html">Notes</a> · <a href="index.html">GIFs</a> ·
      <a
        href="https://github.com/mmbmf1"
        target="_blank"
        rel="noopener noreferrer"
        >GitHub</a
      >
    </p>

    <h1 style="margin-bottom: 0">GIFs</h1>

    <div class="gif-rows">
      <div id="gif-favorites-wrap">
        <p class="gif-row-label">favorites</p>
        <div
          id="gif-row-favorites"
          class="gif-grid"
          role="region"
          aria-label="Favorite GIFs"
        ></div>
      </div>
      <div id="gif-others-wrap">
        <p class="gif-row-label">these are good too</p>
        <div
          id="gif-row-others"
          class="gif-grid"
          role="region"
          aria-label="GIF carousel"
        >
          <div class="gif-card">
            <img
              class="gif"
              data-gif="https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExYjV2bjh4bDIybml4cmJ5MTV4dzl5M2J0eWt3NWpqbTc4Yng0ODQ4bSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/kUgUnmqig0X3q/giphy.gif"
              src="https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExYjV2bjh4bDIybml4cmJ5MTV4dzl5M2J0eWt3NWpqbTc4Yng0ODQ4bSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/kUgUnmqig0X3q/giphy.gif"
              alt="les grossman"
              data-title="if you dont like les grossman, then fuck you"
              loading="lazy"
            />
            <div class="card-labels">
              <span class="card-label">click to copy</span>
              <span class="card-label card-label-title"></span>
            </div>
          </div>

          <div class="gif-card">
            <img
              class="gif"
              data-gif="https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExdzV3cjF5Y2pibmpiaGl0ejNtZTJzdG1waTJiaHk4YWdkbzJpZWNpaiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/qOhzfrkMzQO8U/giphy.gif"
              src="https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExdzV3cjF5Y2pibmpiaGl0ejNtZTJzdG1waTJiaHk4YWdkbzJpZWNpaiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/qOhzfrkMzQO8U/giphy.gif"
              alt="the future is bright"
              data-title="the future is bright"
              loading="lazy"
            />
            <div class="card-labels">
              <span class="card-label">click to copy</span>
              <span class="card-label card-label-title"></span>
            </div>
          </div>

          <div class="gif-card">
            <img
              class="gif"
              data-gif="https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExamZsdWRxbDJlbXFmYTBpeDI5MmliNmMwbGhvYTRrcXRzN3c2dm4wZyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/E87jjnSCANThe/giphy.gif"
              src="https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExamZsdWRxbDJlbXFmYTBpeDI5MmliNmMwbGhvYTRrcXRzN3c2dm4wZyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/E87jjnSCANThe/giphy.gif"
              alt="gathering requirements"
              data-title="fucking tell me already, have shit todo"
              loading="lazy"
            />
            <div class="card-labels">
              <span class="card-label">click to copy</span>
              <span class="card-label card-label-title"></span>
            </div>
          </div>

          <div class="gif-card">
            <img
              class="gif"
              data-gif="https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExYmw2Z2c0YWN0MHJ4OGVnb2Y5NnV0bHJ0Y2wyY25oZnJtbnQzMDVpbSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/dIV7HapCtAzHE6N3j1/giphy.gif"
              src="https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExYmw2Z2c0YWN0MHJ4OGVnb2Y5NnV0bHJ0Y2wyY25oZnJtbnQzMDVpbSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/dIV7HapCtAzHE6N3j1/giphy.gif"
              alt="patriotic"
              data-title="you wish you were this badass"
              loading="lazy"
            />
            <div class="card-labels">
              <span class="card-label">click to copy</span>
              <span class="card-label card-label-title"></span>
            </div>
          </div>

          <div class="gif-card">
            <img
              class="gif"
              data-gif="https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExOXNsajA5bHNrZXIxdDl0aGtwbWVlYWdjeHk2OW91bGZkbHRzdW91YSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/MM0Jrc8BHKx3y/giphy.gif"
              src="https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExOXNsajA5bHNrZXIxdDl0aGtwbWVlYWdjeHk2OW91bGZkbHRzdW91YSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/MM0Jrc8BHKx3y/giphy.gif"
              alt="legend"
              data-title=""
              loading="lazy"
            />
            <div class="card-labels">
              <span class="card-label">click to copy</span>
              <a
                class="card-label"
                href="https://www.youtube.com/watch?v=bS5P_LAqiVg&t=64s&pp=ygUJa3VuZyBmdXJ5"
                target="_blank"
                rel="noopener"
                title="open on YouTube"
              >
                view on youtube
              </a>
              <span class="card-label card-label-title"></span>
            </div>
          </div>

          <div class="gif-card">
            <img
              class="gif"
              data-gif="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExdWFpenZpNXozZmlzc3ZweHBsaDVkajAzNHdxOHRwYjVhaWJweTBibSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/jUwpNzg9IcyrK/giphy.gif"
              src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExdWFpenZpNXozZmlzc3ZweHBsaDVkajAzNHdxOHRwYjVhaWJweTBibSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/jUwpNzg9IcyrK/giphy.gif"
              alt="my bad"
              data-title="my bad..."
              loading="lazy"
            />
            <div class="card-labels">
              <span class="card-label">click to copy</span>
              <span class="card-label card-label-title"></span>
            </div>
          </div>

          <div class="gif-card">
            <img
              class="gif"
              data-gif="https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExZXdhbWk3MzI4ZTNrcTRld2JyM3p3amhnMjlvZWR6NTI5MWRlcW1oYyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/wi8Ez1mwRcKGI/giphy.gif"
              src="https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExZXdhbWk3MzI4ZTNrcTRld2JyM3p3amhnMjlvZWR6NTI5MWRlcW1oYyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/wi8Ez1mwRcKGI/giphy.gif"
              alt="do it"
              data-title="hurry up and do it"
              loading="lazy"
            />
            <div class="card-labels">
              <span class="card-label">click to copy</span>
              <span class="card-label card-label-title"></span>
            </div>
          </div>

          <div class="gif-card">
            <img
              class="gif"
              data-gif="https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExeTgzNzV3d2ZveWNqYmo2Nnl4YThjZ2ptbmxrcnNtazhjYjl0MWl6OCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/oxahPI4vpzbSE/giphy.gif"
              src="https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExeTgzNzV3d2ZveWNqYmo2Nnl4YThjZ2ptbmxrcnNtazhjYjl0MWl6OCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/oxahPI4vpzbSE/giphy.gif"
              alt="for sure"
              data-title="yup no worries"
              loading="lazy"
            />
            <div class="card-labels">
              <span class="card-label">click to copy</span>
              <span class="card-label card-label-title"></span>
            </div>
          </div>

          <div class="gif-card">
            <img
              class="gif"
              src="https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExeDE2M21ic3F2ZzBhdTAwb25mbWJiMm9uODV1MXNyOGY1emd5b2RzeSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/VGJPsBvlsHDyw/giphy.gif"
              data-gif="https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExeDE2M21ic3F2ZzBhdTAwb25mbWJiMm9uODV1MXNyOGY1emd5b2RzeSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/VGJPsBvlsHDyw/giphy.gif"
              alt="heck ya"
              data-title="heck ya"
              loading="lazy"
            />
            <div class="card-labels">
              <span class="card-label">click to copy</span>
              <span class="card-label card-label-title"></span>
            </div>
          </div>

          <div class="gif-card">
            <img
              class="gif"
              data-gif="https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExNWlwbWI2NHhoeXZwaWFnZ243eG41ajZtZnF3bWcyNmRxaWxsemVzeiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/Ph0izSl5UidtS/giphy.gif"
              src="https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExNWlwbWI2NHhoeXZwaWFnZ243eG41ajZtZnF3bWcyNmRxaWxsemVzeiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/Ph0izSl5UidtS/giphy.gif"
              alt="cousin randy"
              data-title="cousin randy"
              loading="lazy"
            />
            <div class="card-labels">
              <span class="card-label">click to copy</span>
              <span class="card-label card-label-title"></span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="toast" class="toast" role="status" aria-live="polite">copied</div>

    <script>
      const toast = document.getElementById('toast')
      let toastTimer = null

      const FAVORITES_KEY = 'gif-favorites'
      const MAX_FAVORITES = 10
      const isLocal =
        /^localhost$|^127\.0\.0\.1$/.test(location.hostname) ||
        location.hostname === ''

      // On public site, favorites are read-only (this list); on local you edit via hearts → localStorage
      const PUBLIC_FAVORITES = []

      function getFavorites() {
        if (!isLocal) return PUBLIC_FAVORITES.slice(0, MAX_FAVORITES)
        try {
          const raw = localStorage.getItem(FAVORITES_KEY)
          const arr = raw ? JSON.parse(raw) : []
          return Array.isArray(arr) ? arr.slice(0, MAX_FAVORITES) : []
        } catch {
          return []
        }
      }
      function setFavorites(arr) {
        if (!isLocal) return
        localStorage.setItem(
          FAVORITES_KEY,
          JSON.stringify(arr.slice(0, MAX_FAVORITES))
        )
      }

      function getGifId(card) {
        const img = card.querySelector('.gif')
        return img && img.getAttribute('data-gif')
      }

      function createHeartButton() {
        const btn = document.createElement('button')
        btn.type = 'button'
        btn.className = 'heart-btn'
        btn.setAttribute('aria-label', 'Add to favorites')
        btn.innerHTML =
          '<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>'
        return btn
      }

      function fillTitlePills() {
        document.querySelectorAll('.gif-card').forEach((card) => {
          const img = card.querySelector('.gif')
          const titleEl = card.querySelector('.card-label-title')
          const title = img && img.getAttribute('data-title')
          if (img && titleEl && title) titleEl.textContent = title
        })
      }

      function renderRows() {
        const rowFav = document.getElementById('gif-row-favorites')
        const rowOthers = document.getElementById('gif-row-others')
        if (!rowFav || !rowOthers) return
        const favorites = getFavorites()
        const cards = [].slice
          .call(rowFav.querySelectorAll('.gif-card'))
          .concat([].slice.call(rowOthers.querySelectorAll('.gif-card')))
        const byId = new Map(cards.map((c) => [getGifId(c), c]))
        const favOrdered = favorites
          .filter((id) => byId.has(id))
          .slice(0, MAX_FAVORITES)
        const rest = cards.filter((c) => !favorites.includes(getGifId(c)))
        rowFav.innerHTML = ''
        rowOthers.innerHTML = ''
        favOrdered.forEach((id) => rowFav.appendChild(byId.get(id)))
        rest.forEach((c) => rowOthers.appendChild(c))
        const wrap = document.getElementById('gif-favorites-wrap')
        if (wrap) wrap.style.display = rowFav.children.length ? '' : 'none'
        cards.forEach((card) => {
          const id = getGifId(card)
          const isFav = favorites.includes(id)
          let heart = card.querySelector('.heart-btn')
          if (!heart) {
            heart = createHeartButton()
            if (isLocal) {
              heart.addEventListener('click', (e) => {
                e.preventDefault()
                e.stopPropagation()
                const gid = getGifId(card)
                const fav = getFavorites()
                const idx = fav.indexOf(gid)
                if (idx >= 0) {
                  fav.splice(idx, 1)
                  setFavorites(fav)
                  renderRows()
                  showToast('Removed from favorites')
                } else {
                  if (fav.length >= MAX_FAVORITES) {
                    showToast('Favorites full (10 max)')
                    return
                  }
                  fav.push(gid)
                  setFavorites(fav)
                  renderRows()
                  showToast('Added to favorites')
                }
              })
            } else {
              heart.setAttribute('aria-disabled', 'true')
            }
            card.insertBefore(heart, card.firstChild)
          }
          heart.classList.toggle('is-fav', isFav)
          heart.setAttribute(
            'aria-label',
            isFav ? 'Remove from favorites' : 'Add to favorites'
          )
        })
        fillTitlePills()
      }

      function showToast(text = 'copied') {
        toast.textContent = text
        toast.classList.add('show')
        clearTimeout(toastTimer)
        toastTimer = setTimeout(() => toast.classList.remove('show'), 900)
      }

      async function copyText(text) {
        if (navigator.clipboard && window.isSecureContext) {
          await navigator.clipboard.writeText(text)
          return
        }
        const ta = document.createElement('textarea')
        ta.value = text
        ta.style.position = 'fixed'
        ta.style.left = '-9999px'
        document.body.appendChild(ta)
        ta.select()
        document.execCommand('copy')
        ta.remove()
      }

      renderRows()

      document.querySelectorAll('img[data-gif]').forEach((img) => {
        img.addEventListener('click', async (e) => {
          e.preventDefault()
          e.stopPropagation()

          const url = img.getAttribute('data-gif')
          const md = `![](${url})`

          try {
            await copyText(md)
            showToast('copied markdown')
          } catch {
            showToast('copy failed')
          }
        })
      })
    </script>
  </body>
</html>
